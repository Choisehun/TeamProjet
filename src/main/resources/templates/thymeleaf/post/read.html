<!DOCTYPE html>
<html lang="en" xmlns:tb="http://www.w3.org/1999/xhtml">
<head>
    <script src="https://unpkg.com/htmx.org@1.8.6"></script>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Î∂ÄÌä∏Ïä§Ìä∏Îû© CSS ÎßÅÌÅ¨ Ï∂îÍ∞Ä -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h3>Ï†úÎ™© :</h3>
    <div th:text="${post.getTitle()}"></div>
    <h3>Ïú†Ï†Ä ÏïÑÏù¥Îîî :</h3>
    <div th:text="${post.getUser().getUserId()}"></div>
    <h3>ÏãúÍ∞Ñ :</h3>
    <div th:text="${post.getTime()}"></div>
    <h3>Í≤åÏãúÍ∏ÄÏùò Ï¢ÖÎ•ò:</h3>
    <div th:text="${post.getPostCategory().getName()}"></div>
    <h3>Ïù¥ÎØ∏ÏßÄ :</h3>
    <img th:src="${post.getImagePath()}" class="img-fluid">
    <h3>ÎÇ¥Ïö© :</h3>
    <div th:text="${post.getContent()}"></div>

    <a th:href="@{/post/delete(postId=${post.getId()})}" class="btn btn-danger">ÏÇ≠Ï†ú</a>
    <a th:href="@{/post/update(postId=${post.getId()})}" class="btn btn-primary">ÏàòÏ†ï</a>

    <hr>

    <h3>Í≤åÏãúÍ∏Ä Î¶¨Î∑∞</h3>
    <a th:href="@{/post/read(reviewLink=true,postId=${post.getId()})}" class="btn btn-info">Î¶¨Î∑∞ ÏûëÏÑ±</a>
    <div th:if="${reviewLink}">
        <form th:action="@{/post/review/add}" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label for="title">Ï†úÎ™©</label>
                <input type="text" name="title" id="title" class="form-control">
            </div>
            <div class="form-group">
                <label for="content">ÎÇ¥Ïö©</label>
                <input type="text" name="content" id="content" class="form-control">
            </div>
            <div class="form-group">
                <label for="file">Ïù¥ÎØ∏ÏßÄ</label>
                <input type="file" name="file" id="file" accept="image/*" class="form-control-file">
            </div>
            <input type="hidden" name="kinds" value="PostReview">
            <input type="hidden" name="kindsId" th:value="${post.getId()}">
            <input type="submit" value="ÏûëÏÑ±" class="btn btn-success">
        </form>
    </div>
    <div th:each="reviewList:${postReviewList}">
        <h4>Ï†úÎ™© :</h4>
        <div th:text="${reviewList.getTitle()}"></div>
        <h4>Ïú†Ï†Ä ÏïÑÏù¥Îîî:</h4>
        <div th:text="${reviewList.getUser().getUserId()}"></div>
        <h4>ÏãúÍ∞Ñ:</h4>
        <div th:text="${reviewList.getTime()}"></div>
        <h4>Ïù¥ÎØ∏ÏßÄ :</h4>
        <img th:src="${reviewList.getImagePath()}" class="img-fluid">
        <h4>ÎÇ¥Ïö© :</h4>
        <div th:text="${reviewList.getContent()}"></div>


        <div th:text="${reviewList.getTime()}"></div>
    Ïù¥ÎØ∏ÏßÄ:
    <img th:src="${reviewList.getImagePath()}">
    ÎÇ¥Ïö©:
    <div th:text="${reviewList.getContent()}"></div>

    <!--    id result Í∞íÏù¥ "Best" ÏùºÎïå-->
    <div th:each="recommend:${recommendList}">
        <div th:if="${reviewList.getId()==recommend.getBaseReview().getId()}" onclick="toggleVisibility()" id="isExist" >
            <div th:if="${recommend.getRecommend().equals('Best')}">
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="CANCEL">
                    <input type="submit" value="üëç" style="background-color: blue">
                </form>
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="WOREST">
                    <input type="submit" value="üëé">
                </form>
            </div>
            <!--id result Í∞íÏù¥ "Worst" ÏùºÎïå-->
            <div th:if="${recommend.getRecommend().equals('Worst')}">
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="BEST">
                    <input type="submit" value="üëç">
                </form>
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="CANCEL">
                    <input type="submit" value="üëé" style="background-color: red">
                </form>
            </div>
            <!--    id result Í∞íÏù¥ "Cancel" ÏùºÎïå-->
            <div th:if="${recommend.getRecommend().equals('Cancel')}">
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="BEST">
                    <input type="submit" value="üëç">
                </form>
                <form th:action="@{/review/recommend}" method="post">
                    <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                    <input type="hidden" name="trueOrFalse" th:value="WORST">
                    <input type="submit" value="üëé">
                </form>
            </div>
        </div>
        <!--Ïó¨Í∏∞Î∂ÄÎ∂Ñ!!!-->
        <div th:if="${reviewList.getId()!=recommend.getBaseReview().getId()}" id="isEmpty" style="display: block">
            <form th:action="@{/review/recommend}" method="post">
                <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                <input type="hidden" name="trueOrFalse" th:value="BEST">
                <input type="submit" value="üëç">
            </form>
            <form th:action="@{/review/recommend}" method="post">
                <input type="hidden" name="baseReviewId" th:value="${reviewList.getId()}">
                <input type="hidden" name="trueOrFalse" th:value="CANCEL">
                <input type="submit" value="üëé">
            </form>
        </div>

    </div>

    <script>
        function toggleVisibility() {
            var isExistDiv = document.getElementById("isExist");
            var isEmptyDiv = document.getElementById("isEmpty");

            if (isEmptyDiv.style.display === "block") {
                isExistDiv.style.display = "block";
                isEmptyDiv.style.display = "none";
            } else {
                isExistDiv.style.display = "none";
                isEmptyDiv.style.display = "block";
            }
        }
    </script>

        <a th:href="@{/post/review/delete(reviewId=${reviewList.getId()})}" class="btn btn-danger">ÏÇ≠Ï†ú</a>
        <a th:href="@{/post/review/update(reviewId=${reviewList.getId()})}" class="btn btn-primary">ÏàòÏ†ï</a>
        <hr>
</div>
</div>
</body>
</html>